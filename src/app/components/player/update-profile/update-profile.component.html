<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <!-- Encabezado con logo y bienvenida -->
      <div class="logo-container mb-4">
        <img
          src="/brand.png"
          alt="logo padel"
          class="position-absolute start-0"
          style="
            max-inline-size: 120px;
            margin-block-start: 25px;
            block-size: auto;
            inset-block-start: 50%;
            transform: translateY(-50%);
          "
        />

        <div
          class="position-absolute start-50 translate-middle-x text-center"
          style="inset-block-start: 50%; transform: translate(-50%, -50%)"
        >
          <h1 class="mb-1" style="color: #275c6a">Hola {{ displayName }},</h1>
          <h3 class="text-muted mb-0">Actualizá tus datos aquí</h3>
        </div>
      </div>

      <!-- Formulario -->
      <div class="card shadow-lg border-0 card-form">
        <div class="card-body p-5">
          <form [formGroup]="form" (ngSubmit)="continuar()">
            <div class="mb-5">
              <h5 class="mb-4 border-bottom pb-2" style="color: #275c6a">DATOS PERSONALES</h5>

              <!-- Nombre y Apellido -->
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="nombre" class="form-label">Nombre</label>
                  <input
                    type="text"
                    class="form-control"
                    id="nombre"
                    formControlName="nombres"
                    placeholder="Ingresa tu nombre"
                  />
                </div>
                <div class="col-md-6">
                  <label for="apellido" class="form-label">Apellido</label>
                  <input
                    type="text"
                    class="form-control"
                    id="apellido"
                    formControlName="apellidos"
                    placeholder="Ingresa tu apellido"
                  />
                </div>
              </div>

              <!-- DNI y Teléfono -->
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="dni" class="form-label">DNI</label>
                  <input
                    type="text"
                    class="form-control"
                    id="dni"
                    formControlName="dni"
                    placeholder="Ingresa tu DNI"
                  />
                </div>
                <div class="col-md-6">
                  <label for="telefono" class="form-label">Teléfono</label>
                  <input
                    type="tel"
                    class="form-control"
                    id="telefono"
                    formControlName="telefono"
                    placeholder="Ingresa tu teléfono"
                  />
                </div>
              </div>

              <!-- Dirección -->
              <div class="row mb-3">
                <div class="col-12">
                  <label for="direccion" class="form-label">Dirección</label>
                  <input
                    type="text"
                    class="form-control"
                    id="direccion"
                    formControlName="direccion"
                    placeholder="Ingresa tu dirección"
                  />
                </div>
              </div>

              <!-- Localidad y Provincia -->
              <div class="row mb-4">
                <div class="col-md-6">
                  <label for="localidad" class="form-label">Localidad</label>
                  <input
                    type="text"
                    class="form-control"
                    id="localidad"
                    formControlName="localidad"
                    placeholder="Ingresa tu localidad"
                  />
                </div>
                <div class="col-md-6">
                  <label for="provincia" class="form-label">Provincia</label>
                  <select class="form-select" id="provincia" formControlName="provincia">
                    <option value="">--Seleccionar--</option>
                    <option *ngFor="let p of provincias" [value]="p">{{ p }}</option>
                  </select>
                </div>
              </div>

              <!-- Foto de perfil -->
              <div class="row mb-4">
                <div class="col-12">
                  <label class="form-label">Foto de Perfil</label>
                  <div class="d-flex gap-3 align-items-center">
                    <button type="button" class="btn btn-outline-primary" (click)="subirFoto()">
                      Subir Foto
                    </button>
                    <span class="text-muted">o</span>
                    <button type="button" class="btn btn-outline-success" (click)="usarFotoGoogle()">
                      Usar foto de Google
                    </button>
                  </div>
                </div>
              </div>

              <hr class="my-4" />

              <!-- PREFERENCIAS DE JUEGO -->
              <div class="mb-4">
                <h5 style="color: #275c6a">PREFERENCIAS DE JUEGO</h5>
              </div>

              <!-- Categoría y Posición -->
              <div class="row mb-4">
                <div class="col-md-6">
                  <label for="categoria" class="form-label">Categoría</label>
                  <select class="form-select" id="categoria" formControlName="categoria">
                    <option value="">--Seleccionar--</option>
                    <option *ngFor="let c of categorias" [value]="c">{{ c }}</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="posicion" class="form-label">Posición</label>
                  <select class="form-select" id="posicion" formControlName="posicion">
                    <option value="">--Seleccionar--</option>
                    <option *ngFor="let pos of posiciones" [value]="pos">{{ pos }}</option>
                  </select>
                </div>
              </div>

              <!-- Botones -->
              <div class="d-flex justify-content-end mt-4 gap-2">
                <!-- SOLO si viene desde editar perfil -->
                <button
                  *ngIf="isEditMode"
                  type="button"
                  class="btn btn-outline-secondary"
                  (click)="volver()"
                  [disabled]="submitting"
                >
                  ← Volver
                </button>

                <button type="submit" class="btn btn-success" [disabled]="submitting">
                  {{ submitting ? 'Guardando...' : 'Actualizar Perfil' }}
                </button>

                <!-- SOLO si viene del registro -->
                <button
                  *ngIf="!isEditMode"
                  type="button"
                  class="btn btn-outline-secondary"
                  (click)="saltarPaso()"
                  [disabled]="submitting"
                >
                  Completar luego
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>
</div>
